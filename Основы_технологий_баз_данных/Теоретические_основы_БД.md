# Теоретические основы БД

## 2.1 Модели данных

*Модель данных* - это система взаимосвязанных понятий и правил, предназначенных для описания структур и свойств данных, используемых (хранимых и обрабатываемых) в информационной системе. Причем предполагается, что информационная система пользуется услугами некоторой СУБД.

В состав развитой модели данных входят:

- способы описания данных (какие типы можно использовать, способы построения сложных структур данных из более простых и т.д.);
- способы описания взаимосвязей между объектами данных;
- средства задания ограничений целостности;
- способы конструирования операций, которые можно использовать в рамках модели данных.

Не все модели данных современных СУБД содержат эти составляющие в развитой форме, но все они необходимы. Их отсутствие означает, что эти элементы должны быть реализованы на уровне приложений, использующих такую СУБД.

### 2.1.1 Идентификация и изменяемость

Многообразие методов идентификации можно условно разделить на следующие категории:

- **По естественным признакам** объекта реального мира, который описывает объектом данных. Например, номер бронирования или биометрические свойства;
- **По искусственному значению**, которое генерируется информационной системой. Причем суррогатный идентификатор, созданный в одной системе, может использоваться как естественный в другой. Например, код документа, идентифицирующий личность;
- **По связи объекта** с другим, уже идентифицированным объектом. Например, "правое переднее колесо легкового автомобиля" идентифицирует колесо по его месту.

Выбор метода идентификации важен при проектировании базы данных и информационной системы, её использующей. Для моделей данных важно само наличие какого-либо идентификатора, а не его природа. Если же способ идентификации не выделен, то единственным способом проверки на равенство является проверка на совпадение значений всех элементов данных. В таких моделях данных объекты, различающиеся значением хотя бы 1 элемента, считаются различными. Следовательно, в таких моделях объекты изменяться не могут. Можно заменить объект на другой, но изменить невозможно.

В данной главе применяется идентификация по значениям атрибутов, а в объектных моделях данных и в модели "сущность - связь" предполагают наличие выделенных для идентификации атрибутов объектов. Причём наиболее широко используемая модель данных - реляционная - не поддерживает изменяемость.

### 2.1.2 Навигация и поиск по значениям

Поиск данных для обработки выполняется в любой системе управления базами данных, однако в рамках разных моделей данных он осуществляется по-разному. Можно выделить следующие основные классы поисковых операций:

- **Навигационный доступ**: переходы от одного объекта к другим происходит с помощью ссылок;
- **Поиск по значениям**: ассоциативный поиск

Навигационный доступ использует явно заданные связи между объектами. Результатом поиска по значениям обычно является набор объектов данных, удовлетворяющих условиям поиска. Такой поиск может не использовать заранее заданные связи, и часто результат содержит несколько объектов данных. Этот способ часто используется в декларативных языках запросов, в том числе и в используемых на практике СУБД, в которых реализован язык запросов SQL.

Отметим, что навигация возможна, даже если модель данных не предусматривает явную идентификацию объектов данных. Не существует четкого различия между способами поиска, и многие модели допускают использование операций того и другого класса. ПОэтому выбор способа поиска является не только свойством модели, но и отражает стиль программирования приложений.

### 2.1.3 Объекты и коллекции объектов

?

### 2.1.4. Свойства моделей данных

Здесь детально не рассматриваются ранние модели данных (иерархическая и сетевая), потому что по своим характеристикам и свойствам они похожи на объектные модели данных. Заметим, что для всех таких моделей характерны навигационный способ доступа и ориентация на обработку отдельных объектов. При этом реляцонные модели данных уступают по эффективности в обработке отдельных значений, но показывает гораздо лучше результаты при массовой обработке данных. Распространение в последние годы моделей данных с ограниченными функциями связано с отказом от массовой обработки объектов на уровне базы данных и, соответственно, с изменением требований к модели данных и критериев эффективности.

## 2.2 Реляционная модель данных

### 2.2.1. Основные понятия реляционной модели данных

**Домены**

Неформально домен можно описать как множество значений, обладающих некотоырми общими свойствами. Например, можно говорить о доменах целых или вещественных чисел, домене длин, домене текстов и т.д.

В теоретической реляционной модели данных доменами называются множества некоторых значений. При этом предполагается, что все значения, находящиеся в доменах, являются **скалярными** константами, т.е. структура значений, даже если она существует, не рассматривается в рамках модели, и любые изменения приводят просто к новым значениям, а не к измененным старым. Кроме того, требуется, чтобы на любом домене было определено бинарное отношение равенства. Это значит, что для любых 2х значений из домена можно определить, совпадают эти значения или нет.

Кроме этого, на доменах могут быть определены другие отношения, операции и функции. Например, на доменах, содержащих числовые значения, можно рассматривать:

- отношения упорядочивания <, <=, >, >=;
- арифметические операции, например, +, -, *, /;
- функции, принимающие скалярные значения, например, тригонометрически и др.

Могут также быть определены функции, принимающие значения в другом домене, или функции нескольких аргументов из разных доменов. Например, на домене текстов можно рассматривать функцию, возвращающую длину текста, и функцию, выделяющуб подстроку указанной длины, начиная с указанной позиции.

Любые дополнительные отношения, функции и операции могут использоваться в рамках реляционной модели для вычисления новых значений при описании запросов, однако необходимым для самоый реляционной модели является только отношение равенства.

Домены могут быть взаимосвязаны, однако в реляционной теории все домены рассматриваются как независимые. Можно на практике определить функции для преобразования одного домена в другой, однако в теории такие преобразования не нужны.

По историческим причинам возможности определния доменов рассматриваются как расширения реализаций реляционной модели.

**Отношения, атрибуты и кортежи**

Формально *отношение* определяется как n-местный предикат (т.е. функция с n аргументами, принимающая булево значение). При этом предполагается, что для каждого аргумента задан домен, из которого могут выбираться значения этого аргумента.

В отличие от обычной математической нотации в реляционной теории используются именованные, а не позиционные (т.е. занумерованные натуральными числами) аргументы. Именованные аргументы отношения называются *атрибутами отношения*. Использование имен позволяет записывать атрибуты в произвольном порядке.

Имена атрибутов одного отношения должны быть обязательно попарно различными. С каждым атрибутом связан некоторый домен, из которого выбираются значения этого атрибута, при этом один и тот же домен может быть связан с несколькими различными атрибутами одного отношения.

Множество всех атрибутов отношения называется *схемой отношения*.

Совокупность из n значений, по 1 значению для каждого атрибута, называется кортежем. Можно сказать, что кортеж - это набор значений аргументов, для которого можно вычислить предикат, соответствующий отношению. Говорят, что кортеж принадлежит отношению, если предикат принимает истинное значение на этом кортеже.

Смысл отношений заключается в том, что они описывают зависимости между своими атрибутами. Считается, что значения в кортеже взаимосвязаны, если этот кортеж принадлежит отношению. Если атрибуты соответствуют свойствам некоторого класса объектов реального мира, то принадлежность кортежа отношению может означать, что объект с такими значениями свойств существует в реальности. **Другими словами, каждый кортеж, принадлежащий отношению, выражает истинность некоторого факта.**

Количество кортежей в каком-либо отношении называется *кардинальностью* этого отношения.

Пример:

Предположим, что отношение exams имеет атрибуты {name, course, grade}, принимающие значения в соответствующих доменах. Тогда истинное значение предиката на следующих кортежах указывает на то, что упомянутые студенты получили указанные оценки по этим курсам.

exams (name := 'Anna', course := 'Database', grade := 5)
exams (name := 'Anna', course := 'DataAnalysis', grade := 5)
exams (course := 'DataAnalysis', grade := 4, name := 'Viktor')

Напомним, что предикаты (отношения) обычно не задаются какими-либо формулами. Поэтому, для того чтобы записать предикат, используется принятый в математике табличный способ представления функций: **для каждого значения аргумента выписывается соответствующее ему значение функции**. В нашем случае предикат имеет только 2 значения, поэтому достаточно выписать только те значения аргументов (кортежи), которые входят в отношение.

Каждый кортеж состоит из n значений, поэтому отношения принято записывать в виде таблиц, содержащих n колонок, соответствующих атрибутам отношения, а каждая строка таблицы соответствует одному кортежу. При этом порядок неважен.

В теоретической реляционной модели данных предполагается, что все кортежи, входящие в отношение, различны, и поэтому совокупность кортежей отношения является множеством (в математическом смысле).

В табличном представлении отношение exams может выглядеть так:

![alt text](https://github.com/AsterPhys/PostgreSQL/blob/main/%D0%9E%D1%81%D0%BD%D0%BE%D0%B2%D1%8B_%D1%82%D0%B5%D1%85%D0%BD%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D0%B9_%D0%B1%D0%B0%D0%B7_%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D1%85/images/pic1.png)
